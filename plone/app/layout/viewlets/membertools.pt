<div id="portal-membertools-wrapper"
     tal:define="
       toolbar_visible here/@@plone_context_state/is_toolbar_visible;
       isAnon view/anonymous;
     "
     tal:condition="python:not isAnon and not toolbar_visible"
     i18n:domain="plone"
>

  <p class="hiddenStructure"
     i18n:translate="heading_member_tools"
  >Member tools</p>

  <div class="dropdown dropdown-menu-end"
       id="portal-membertools"
       tal:condition="python:view.user_actions and not view.anonymous"
  >
    <a class="dropdown-toggle"
       id="user-name"
       data-bs-toggle="dropdown"
       tal:attributes="
         href view/homelink_url;
       "
    >
      <span tal:replace="view/user_name">John</span>
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu"
        aria-labelledby="dropdownMenu"
        role="menu"
    >
      <li tal:repeat="action view/user_actions"
          tal:attributes="
            id string:membertools-${action/id};
          "
      >
        <a class="dropdown-item"
           href=""
           tal:content="action/title"
           tal:attributes="
             href action/href;
             target action/link_target|nothing;
           "
           i18n:translate=""
        >
                  action title
        </a>
      </li>
    </ul>
  </div>

</div>
