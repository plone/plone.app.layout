<tal:favicon define="portal_url view/site_url">
    <tal:costum_favicon_setted tal:condition="view/mimetype">
        <link rel="shortcut icon" type="${python: view.mimetype}"
          tal:attributes="href string:$portal_url/site-favicon" />
    </tal:costum_favicon_setted>
    <tal:costum_favicon_not_setted tal:condition="not: view/mimetype">
        <link rel="shortcut icon" type="image/x-icon"
              href="/++resource++plone-favicon.ico" />
    </tal:costum_favicon_not_setted>
</tal:favicon>
